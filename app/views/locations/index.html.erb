<h1>Listing locations</h1>

<%= render 'locations/search_form' %>

<%= will_paginate %>
<br>
<table>
  <thead>
    <tr>
      <th>City</th>
      <th>State</th>
      <th>Country</th>
      <th>Latitude</th>
      <th>Longtitude</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @locations.each do |location| %>
      <tr>
        <td><%= location.city %></td>
        <td><%= location.state_code %></td>
        <td><%= country(location) %></td>
        <td><%= location.latitude %></td>
        <td><%= location.longitude %></td>
        <td><%= link_to 'Show reports', reports_location_path(location) %></td>
        <td><%= link_to 'Create an Alert', alert_location_path(location) %></td>
        <% if (current_user.present? && current_user.admin?) %>
          <td><%= link_to 'Edit location', edit_location_path(location) %></td>
          <td><%= link_to 'Delete', location, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<%= will_paginate %>
<br>
<br>
<%= link_to 'New Location', root_path %>
